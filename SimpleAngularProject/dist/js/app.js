"use strict";var simpleApp=angular.module("simpleApp",["ngResource","ngRoute","ngGrid","ui.bootstrap"]);simpleApp.config(["$routeProvider",function(a){a.when("/customers",{templateUrl:"views/customer/customers.html"}).when("/products",{templateUrl:"views/product/products.html",controller:"ProductController"}).when("/product/:id?",{templateUrl:"views/product/product.html",controller:"ProductController"}).when("/sales",{templateUrl:"views/sale/sales.html"}).otherwise({redirectTo:"/index"})}]),simpleApp.factory("ProductDataService",function(a){var b=a("http://10.197.125.32:8081/products/api/v1/products/:id",{id:"@id"},{get:{method:"GET"},save:{method:"PUT"},query:{method:"GET",isArray:!0},create:{method:"POST"},remove:{method:"DELETE"}});return{getAllProducts:function(){var a=new Array;return b.query({},function(b){b.forEach(function(b){a.push(b)})}),a},getProduct:function(a){return b.get({id:a})},createProduct:function(a){return b.create(a)},saveProduct:function(a,c){return b.save({id:a},c)},deleteProduct:function(a){return b.remove({id:a})}}}),simpleApp.controller("ProductController",function(a,b,c){a.product=null,a.productSave=null,a.products=c.getAllProducts(),a.gridOptions={data:"products",columnDefs:[{field:"id",displayName:"Code"},{field:"name",displayName:"Name"},{field:"amount",displayName:"Price"},{field:"description",displayName:"Description"},{field:"category.name",displayName:"Category"}],multiSelect:!1,selectedItems:[],afterSelectionChange:function(b){b.selected&&(a.product=a.gridOptions.selectedItems[0])}},a.refreshGrid=function(){a.products=c.getAllProducts()},a.open=function(){b.open({templateUrl:"productModal.html",controller:"ProductModalController",resolve:{productSave:function(){return angular.copy(a.productSave)},products:function(){return a.products}}})},a["new"]=function(){a.productSave=null,a.open()},a.edit=function(){a.productSave=a.product,a.open()},a["delete"]=function(){b.open({templateUrl:"deleteProductModal.html",controller:"DeleteProductModalController",resolve:{product:function(){return a.product},products:function(){return a.products}}})}}).controller("ProductModalController",function(a,b,c,d,e){a.product=d,a.saveProduct=function(){if(a.product.id){a.product=e.saveProduct(a.product.id,a.product);var d=c.indexOf(a.product);c[d]=a.product}else a.product=e.createProduct(a.product),c.push(a.product);b.dismiss("save")},a.cancel=function(){b.dismiss("cancel")}}).controller("DeleteProductModalController",function(a,b,c,d,e){a.message="Are you sure you want to delete "+d.name+"?",a.confirm=function(){a["delete"](),b.dismiss("confirm")},a.cancel=function(){b.dismiss("cancel")},a["delete"]=function(){var a=c.indexOf(d);e.deleteProduct(d.id),d=null,c.splice(a,1)}});